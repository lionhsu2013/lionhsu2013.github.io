<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>æ˜Ÿæ˜Ÿæ”¶é›†å°éŠæˆ²</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Noto Sans TC", "Segoe UI", sans-serif;
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: radial-gradient(circle at top, #fef3c7, #bfdbfe);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .game-card {
        width: min(960px, 100%);
        background: rgba(255, 255, 255, 0.9);
        border-radius: 24px;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.15);
        padding: 32px;
        display: grid;
        gap: 24px;
      }

      header {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        align-items: center;
        justify-content: space-between;
      }

      header h1 {
        font-size: clamp(1.5rem, 3vw, 2.4rem);
        margin: 0;
        color: #0f172a;
      }

      header p {
        margin: 4px 0 0;
        color: #475569;
      }

      .stats {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .stat {
        background: #f1f5f9;
        border-radius: 16px;
        padding: 12px 16px;
        min-width: 120px;
      }

      .stat span {
        display: block;
        font-size: 0.85rem;
        color: #64748b;
      }

      .stat strong {
        font-size: 1.4rem;
        color: #0f172a;
      }

      .controls {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      button {
        border: none;
        border-radius: 999px;
        padding: 10px 20px;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button.primary {
        background: #2563eb;
        color: white;
        box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
      }

      button.secondary {
        background: #e2e8f0;
        color: #0f172a;
      }

      button:disabled {
        cursor: not-allowed;
        opacity: 0.6;
        box-shadow: none;
      }

      button:hover:not(:disabled) {
        transform: translateY(-2px);
      }

      .arena {
        position: relative;
        width: 100%;
        aspect-ratio: 16 / 9;
        border-radius: 24px;
        background: linear-gradient(135deg, #38bdf8, #a5b4fc 45%, #fbcfe8);
        overflow: hidden;
        border: 4px solid #fff;
      }

      .player {
        position: absolute;
        width: 56px;
        height: 56px;
        border-radius: 16px;
        background: #0f172a;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.6rem;
        box-shadow: 0 10px 20px rgba(15, 23, 42, 0.35);
        transition: transform 0.1s linear;
        user-select: none;
      }

      .star {
        position: absolute;
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: #facc15;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.4rem;
        box-shadow: 0 8px 16px rgba(250, 204, 21, 0.4);
        animation: float 1.4s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      .message {
        padding: 16px;
        border-radius: 16px;
        background: #f8fafc;
        color: #334155;
      }

      .message strong {
        color: #0f172a;
      }

      .hint {
        font-size: 0.95rem;
        color: #64748b;
      }

      @media (max-width: 720px) {
        .game-card {
          padding: 24px;
        }

        .player {
          width: 48px;
          height: 48px;
        }

        .star {
          width: 34px;
          height: 34px;
        }
      }
    </style>
  </head>
  <body>
    <main class="game-card">
      <header>
        <div>
          <h1>æ˜Ÿæ˜Ÿæ”¶é›†å°éŠæˆ²</h1>
          <p>ç”¨æ–¹å‘éµæˆ– WASD æ“ä½œå¤ªç©ºäººï¼Œ30 ç§’å…§æ”¶é›†è¶Šå¤šæ˜Ÿæ˜Ÿè¶Šå¥½ã€‚</p>
        </div>
        <div class="stats">
          <div class="stat">
            <span>å‰©é¤˜æ™‚é–“</span>
            <strong id="time">30</strong>
          </div>
          <div class="stat">
            <span>åˆ†æ•¸</span>
            <strong id="score">0</strong>
          </div>
          <div class="stat">
            <span>æœ€é«˜åˆ†</span>
            <strong id="best">0</strong>
          </div>
        </div>
      </header>

      <section class="controls">
        <button class="primary" id="startBtn">é–‹å§‹éŠæˆ²</button>
        <button class="secondary" id="resetBtn">é‡æ–°å®šä½æ˜Ÿæ˜Ÿ</button>
      </section>

      <section class="arena" id="arena" aria-label="éŠæˆ²å€åŸŸ">
        <div class="player" id="player" aria-hidden="true">ğŸš€</div>
        <div class="star" id="star">â­</div>
      </section>

      <section class="message">
        <strong>éŠæˆ²æç¤ºï¼š</strong>
        <span class="hint">ç¢°åˆ°æ˜Ÿæ˜ŸæœƒåŠ  5 åˆ†ä¸¦è£œå…… 1 ç§’æ™‚é–“ï¼›è½åœ¨é‚Šç·£æœƒè¢«å½ˆå›ã€‚</span>
      </section>
    </main>

    <script>
      const arena = document.getElementById("arena");
      const player = document.getElementById("player");
      const star = document.getElementById("star");
      const timeDisplay = document.getElementById("time");
      const scoreDisplay = document.getElementById("score");
      const bestDisplay = document.getElementById("best");
      const startBtn = document.getElementById("startBtn");
      const resetBtn = document.getElementById("resetBtn");

      let playerPos = { x: 40, y: 40 };
      let starPos = { x: 70, y: 50 };
      let keysPressed = new Set();
      let score = 0;
      let best = 0;
      let timeLeft = 30;
      let timerId = null;
      let playing = false;

      const clamp = (value, min, max) => Math.max(min, Math.min(max, value));

      const placeStar = () => {
        const rect = arena.getBoundingClientRect();
        const padding = 12;
        const starSize = 40;
        const x = Math.random() * (rect.width - starSize - padding * 2) + padding;
        const y = Math.random() * (rect.height - starSize - padding * 2) + padding;
        starPos = {
          x: (x / rect.width) * 100,
          y: (y / rect.height) * 100
        };
        star.style.left = `${starPos.x}%`;
        star.style.top = `${starPos.y}%`;
      };

      const updatePlayer = () => {
        player.style.left = `${playerPos.x}%`;
        player.style.top = `${playerPos.y}%`;
      };

      const resetGame = () => {
        score = 0;
        timeLeft = 30;
        playerPos = { x: 40, y: 40 };
        updatePlayer();
        placeStar();
        scoreDisplay.textContent = score;
        timeDisplay.textContent = timeLeft;
      };

      const startGame = () => {
        if (playing) return;
        playing = true;
        startBtn.textContent = "éŠæˆ²é€²è¡Œä¸­";
        startBtn.disabled = true;
        resetGame();
        timerId = window.setInterval(() => {
          timeLeft -= 1;
          timeDisplay.textContent = timeLeft;
          if (timeLeft <= 0) {
            endGame();
          }
        }, 1000);
      };

      const endGame = () => {
        playing = false;
        window.clearInterval(timerId);
        timerId = null;
        startBtn.textContent = "å†æ¬¡æŒ‘æˆ°";
        startBtn.disabled = false;
        if (score > best) {
          best = score;
          bestDisplay.textContent = best;
        }
      };

      const handleMovement = () => {
        if (!playing) return;
        const speed = 0.7;
        const movement = {
          x: 0,
          y: 0
        };

        if (keysPressed.has("ArrowUp") || keysPressed.has("w")) movement.y -= speed;
        if (keysPressed.has("ArrowDown") || keysPressed.has("s")) movement.y += speed;
        if (keysPressed.has("ArrowLeft") || keysPressed.has("a")) movement.x -= speed;
        if (keysPressed.has("ArrowRight") || keysPressed.has("d")) movement.x += speed;

        if (movement.x === 0 && movement.y === 0) {
          requestAnimationFrame(handleMovement);
          return;
        }

        playerPos = {
          x: clamp(playerPos.x + movement.x, 2, 92),
          y: clamp(playerPos.y + movement.y, 2, 86)
        };
        updatePlayer();
        checkCollision();
        requestAnimationFrame(handleMovement);
      };

      const checkCollision = () => {
        const distance = Math.hypot(playerPos.x - starPos.x, playerPos.y - starPos.y);
        if (distance < 6) {
          score += 5;
          timeLeft = Math.min(45, timeLeft + 1);
          scoreDisplay.textContent = score;
          timeDisplay.textContent = timeLeft;
          placeStar();
        }
      };

      document.addEventListener("keydown", (event) => {
        const key = event.key.toLowerCase();
        if (["arrowup", "arrowdown", "arrowleft", "arrowright", "w", "a", "s", "d"].includes(key)) {
          event.preventDefault();
        }
        keysPressed.add(key);
      });

      document.addEventListener("keyup", (event) => {
        keysPressed.delete(event.key.toLowerCase());
      });

      startBtn.addEventListener("click", startGame);
      resetBtn.addEventListener("click", placeStar);

      window.addEventListener("load", () => {
        updatePlayer();
        placeStar();
        requestAnimationFrame(handleMovement);
      });
    </script>
  </body>
</html>
